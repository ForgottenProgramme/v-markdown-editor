!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var i=t();for(var r in i)("object"==typeof exports?exports:e)[r]=i[r]}}(window,(function(){return function(e){var t={};function i(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,i),o.l=!0,o.exports}return i.m=e,i.c=t,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)i.d(r,o,function(t){return e[t]}.bind(null,o));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=8)}([function(e,t){e.exports=require("markdownparser")},function(e,t){e.exports=require("marked")},function(e,t){e.exports=require("codemirror")},function(e,t){e.exports=require("codemirror/lib/codemirror.css")},function(e,t,i){},function(e,t){e.exports=require("codemirror/addon/display/fullscreen.js")},function(e,t){e.exports=require("codemirror/mode/markdown/markdown.js")},function(e,t){e.exports=require("codemirror/addon/display/placeholder.js")},function(e,t,i){"use strict";i.r(t);i(3),i(4);var r=i(0),o=i.n(r),n=i(1),l=i.n(n),s=i(2),a=i.n(s);i(5),i(6),i(7);var c=function(e,t,i,r,o,n,l,s){var a,c="function"==typeof e?e.options:e;if(t&&(c.render=t,c.staticRenderFns=i,c._compiled=!0),r&&(c.functional=!0),n&&(c._scopeId="data-v-"+n),l?(a=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),o&&o.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(l)},c._ssrRegister=a):o&&(a=s?function(){o.call(this,this.$root.$options.shadowRoot)}:o),a)if(c.functional){c._injectStyles=a;var d=c.render;c.render=function(e,t){return a.call(t),d(e,t)}}else{var u=c.beforeCreate;c.beforeCreate=u?[].concat(u,a):[a]}return{exports:e,options:c}}({props:{id:{type:String,default:function(){return"v-md-editor-"+Math.random().toString(16).substr(2,9)}},css:{type:String},width:{type:[String,Number],default:"100%"},height:{type:[String,Number],default:"300px"},toolbar:{type:String,default:"clean redo undo | bold italic strikethrough heading | image link | numlist bullist code quote | preview fullscreen"},placeholder:{type:String,default:""},extend:{type:Object},buttons:{type:Object,default:function(){return{clean:{cmd:"clean",ico:"fas fa-remove-format mdi mdi-format-clear",title:"Html to markdown",hotkey:"Shift-Alt-F"},undo:{cmd:"undo",ico:"fas fa-undo mdi mdi-undo-variant",title:"Undo",hotkey:"Ctrl-Z"},redo:{cmd:"redo",ico:"fas fa-redo mdi mdi-redo-variant",title:"Redo",hotkey:"Ctrl-Y"},bullist:{cmd:"bullist",ico:"fas fa-list-ul mdi mdi-format-list-bulleted",title:"Generic List"},numlist:{cmd:"numlist",ico:"fas fa-list-ol mdi mdi-format-list-numbered",title:"Numbered List"},bold:{title:"Bold",ico:"fas fa-bold mdi mdi-format-bold",cmd:"bold",hotkey:"Ctrl-B"},italic:{title:"Italic",ico:"fas fa-italic mdi mdi-format-italic",cmd:"italic",hotkey:"Ctrl-I"},strikethrough:{cmd:"strikethrough",ico:"fas fa-strikethrough mdi mdi-format-strikethrough",title:"Strikethrough"},heading:{title:"Heading",ico:"fas fa-heading mdi mdi-format-header-3",cmd:"heading",hotkey:"Ctrl-H"},code:{title:"Code",ico:"fas fa-code mdi mdi-code-tags",cmd:"code",hotkey:"Ctrl-X"},quote:{title:"Quote",ico:"fas fa-quote-left mdi mdi-format-quote-open",cmd:"quote",hotkey:"Ctrl-Q"},link:{title:"Link",ico:"fas fa-link mdi mdi-link",cmd:"link",hotkey:"Ctrl-K"},image:{title:"Image",ico:"fas fa-image mdi mdi-image",cmd:"image",hotkey:"Ctrl-P"},fullscreen:{cmd:"fullscreen",ico:"fas fa-expand mdi mdi-fullscreen",title:"Toggle Fullscreen",hotkey:"F11",ready:!0},preview:{cmd:"preview",ico:"fas fa-eye mdi mdi-eye",title:"Toggle Preview",hotkey:"Ctrl-P",ready:!0}}}},theme:{type:String,default:"outline-secondary"},value:{type:String,default:"",required:!1},options:{type:Object,default:function(){return{}}}},data:function(){return{editor:null,preview:!1,fullScreen:!1,html:"",toolbars:[]}},computed:{styles:function(){return{width:/^\d+$/.test(this.width)?"".concat(this.width,"px"):this.width,height:/^\d+$/.test(this.height)?"".concat(this.height,"px"):this.height}}},watch:{value:function(e){e!=this.editor.getValue()&&this.editor.setValue(e)}},methods:{isEmpty:function(e){return null==e||/^[\s\xa0]*$/.test(e)},isUrl:function(e){return!this.isEmpty(e)&&e.match(/((http(s)?):\/\/[\w\.\/\-=?#]+)/gi)},format:function(){for(var e=arguments[0],t=1;t<=arguments.length;t++)e=e.replace(/%[a-z]/,arguments[t]);return e},_toggleBlock:function(e,t,i){i=this.isEmpty(i)?t:i;var r,o=this.editor,n=o.getCursor("start"),l=o.getCursor("end");this.state()[e]?(t=(r=o.getLine(n.line)).slice(0,n.ch),i=r.slice(n.ch),"bold"==e?(t=t.replace(/(\*\*|__)(?![\s\S]*(\*\*|__))/,""),i=i.replace(/(\*\*|__)/,"")):"italic"==e?(t=t.replace(/(\*|_)(?![\s\S]*(\*|_))/,""),i=i.replace(/(\*|_)/,"")):"strikethrough"==e&&(t=t.replace(/(\*\*|~~)(?![\s\S]*(\*\*|~~))/,""),i=i.replace(/(\*\*|~~)/,"")),o.replaceRange(t+i,{line:n.line,ch:0},{line:n.line,ch:99999999999999}),"bold"==e||"strikethrough"==e?(n.ch-=2,n!==l&&(l.ch-=2)):"italic"==e&&(n.ch-=1,n!==l&&(l.ch-=1))):(r=o.getSelection(),"bold"==e?r=(r=r.split("**").join("")).split("__").join(""):"italic"==e?r=(r=r.split("*").join("")).split("_").join(""):"strikethrough"==e&&(r=r.split("~~").join("")),o.replaceSelection(t+r+i),n.ch+=t.length,l.ch=n.ch+r.length)},_toggleLine:function(e){for(var t=this.editor,i=this.state(),r=t.getCursor("start"),o=t.getCursor("end"),n={quote:/^(\s*)\>\s+/,bullist:/^(\s*)(\*|\-|\+)\s+/,numlist:/^(\s*)\d+\.\s+/},l={quote:"> ",bullist:"* ",numlist:"1. "},s=r.line;s<=o.line;s++)!function(r){var o=t.getLine(r);o=i[e]?o.replace(n[e],"$1"):l[e]+o,t.replaceRange(o,{line:r,ch:0},{line:r,ch:99999999999999})}(s)},state:function(e){e=e||this.editor.getCursor("start");var t=this.editor.getTokenAt(e);if(!t.type)return{};for(var i,r,o=t.type.split(" "),n={},l=0;l<o.length;l++)"strong"===(i=o[l])?n.bold=!0:"variable-2"===i?(r=this.editor.getLine(e.line),/^\s*\d+\.\s/.test(r)?n.numlist=!0:n.bullist=!0):"atom"===i?n.quote=!0:"em"===i?n.italic=!0:"quote"===i?n.quote=!0:"strikethrough"===i?n.strikethrough=!0:"comment"===i?n.code=!0:"link"===i||"url"===i?n.link=!0:"image"===i?n.image=!0:i.match(/^header(\-[1-6])?$/)&&(n[i.replace("header","heading")]=!0);return n},_replaceSelection:function(e,t,i){var r,o=this.editor,n=t[0],l=t[1],s=o.getCursor("start"),a=o.getCursor("end");i&&Object.keys(i).forEach((function(e){n=n.replace("#"+e+"#",i[e]),l=l.replace("#"+e+"#",i[e])})),e?(r=o.getLine(s.line),n=r.slice(0,s.ch),l=r.slice(s.ch),o.replaceRange(n+l,{line:s.line,ch:0})):(o.replaceSelection(n+l),s.ch+=n.length,s!==a&&(a.ch+=n.length))},drawImage:function(e){var t=this.state();this._replaceSelection(t.image,["![#title#](",'#url# "#title#")'],e)},drawLink:function(e){var t=this.state();this._replaceSelection(t.link,["[#title#]",'(#url# "#title#")'],e)},command:function(e){var t=this.editor,i=t.getSelection();switch(this.$root.$emit("markdown-editor:"+e,this),e){case"undo":t.undo();break;case"redo":t.redo();break;case"bold":this._toggleBlock("bold","**");break;case"italic":this._toggleBlock("italic","*");break;case"strikethrough":this._toggleBlock("strikethrough","~~");break;case"code":this._toggleBlock("code","```");break;case"heading":t.replaceSelection("\n### "+i);break;case"image":var r=prompt("Please enter image url","https://");if(this.isUrl(r)){var n=this.isEmpty(i)?"This is image title":i;this.drawImage({title:n,url:r})}break;case"link":r=prompt("Please enter link","https://");if(this.isUrl(r)){n=this.isEmpty(i)?r:i;this.drawLink({title:n,url:r})}break;case"quote":this._toggleLine("quote");break;case"numlist":this._toggleLine("numlist");break;case"bullist":this._toggleLine("bullist");break;case"preview":this.html=l()(t.getValue(),{breaks:!0}),this.preview=!this.preview;break;case"fullscreen":this.fullScreen=!this.fullScreen,t.setOption("fullScreen",!t.getOption("fullScreen"));break;case"clean":t.replaceSelection(o.a.parse(i))}},build:function(){var e=this;if(!this.__rendered){var t=Object.assign({},this.buttons,this.extend),i={};this.toolbar.split("|").forEach((function(r,o){var n=[];r.toLowerCase().split(/(\s)/).forEach((function(r){if(!e.isEmpty(r)){var o=t[r];e.isEmpty(o.hotkey)||(i[o.hotkey]=function(){return e.command(o.cmd)}),n.push(o)}})),n.length>0&&e.toolbars.push(n)}));var r=Object.assign({mode:"markdown",extraKeys:i},this.options),o=this.editor=a.a.fromTextArea(document.getElementById(this.id),r);o.setValue(this.value),o.setSize(this.width,this.height),o.on("change",(function(t){e.$emit("input",t.getValue())})),this.__rendered=!0}}},mounted:function(){this.build()},destroy:function(){this.editor.toTextArea()}},(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{class:["v-md-container",e.css,{"v-md-auto-resize":"auto"==e.height,"v-md-fullscreen":e.fullScreen}]},[e.toolbars.length>0?i("div",{staticClass:"v-md-toolbar"},e._l(e.toolbars,(function(t){return i("div",{staticClass:"btn-group mr-3",attrs:{role:"group"}},e._l(t,(function(t){return i("button",{class:"btn btn-"+e.theme,attrs:{type:"button",title:t.title,disabled:e.preview&&!t.ready},on:{click:function(i){return e.command(t.cmd)}}},[i("i",{class:t.ico})])})),0)})),0):e._e(),e._v(" "),i("div",{staticClass:"v-md-wrapper",on:{click:function(t){return e.editor.focus()}}},[i("textarea",{staticClass:"v-md-editor",style:e.styles,attrs:{id:e.id,placeholder:e.placeholder}}),e._v(" "),e.preview?i("div",{staticClass:"v-md-preview",domProps:{innerHTML:e._s(e.html)}}):e._e()])])}),[],!1,null,null,null).exports,d={install:function(e){e.__md_editor_installed||(e.__md_editor_installed=!0,e.component("markdown-editor",c))}};"undefined"!=typeof window&&window.Vue&&Vue.use(d);t.default=d}])}));