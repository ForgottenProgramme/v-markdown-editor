module.exports=function(e){var t={};function r(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(i,o,function(t){return e[t]}.bind(null,o));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=10)}([function(e,t){e.exports=require("markdownparser")},function(e,t){e.exports=require("markdown-it")},function(e,t){e.exports=require("codemirror")},function(e,t){e.exports=require("codemirror/lib/codemirror.css")},function(e,t,r){},function(e,t){e.exports=require("codemirror/addon/display/fullscreen.js")},function(e,t){e.exports=require("codemirror/mode/markdown/markdown.js")},function(e,t){e.exports=require("codemirror/mode/gfm/gfm.js")},function(e,t){e.exports=require("codemirror/addon/display/placeholder.js")},function(e,t){e.exports=require("codemirror/addon/selection/active-line.js")},function(e,t,r){"use strict";r.r(t);r(3),r(4);var i=r(0),o=r.n(i),s=r(1),a=r.n(s),l=r(2),n=r.n(l);r(5),r(6),r(7),r(8),r(9);var c=function(e,t,r,i,o,s,a,l){var n,c="function"==typeof e?e.options:e;if(t&&(c.render=t,c.staticRenderFns=r,c._compiled=!0),i&&(c.functional=!0),s&&(c._scopeId="data-v-"+s),a?(n=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),o&&o.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(a)},c._ssrRegister=n):o&&(n=l?function(){o.call(this,this.$root.$options.shadowRoot)}:o),n)if(c.functional){c._injectStyles=n;var d=c.render;c.render=function(e,t){return n.call(t),d(e,t)}}else{var u=c.beforeCreate;c.beforeCreate=u?[].concat(u,n):[n]}return{exports:e,options:c}}({props:{css:{type:String},width:{type:String,default:"100%"},height:{type:String,default:"280px"},toolbar:{type:String,default:"clean redo undo | bold italic strikethrough heading | image link | numlist bullist code quote | preview fullscreen"},extend:{type:Object},buttons:{type:Object,default:function(){return{bold:{title:"Bold",className:"far fa-bold",cmd:"bold",hotkey:"Ctrl-B"},italic:{title:"Italic",className:"far fa-italic",cmd:"italic",hotkey:"Ctrl-I"},strikethrough:{cmd:"strikethrough",className:"far fa-strikethrough",title:"Strikethrough"},heading:{title:"Heading",className:"far fa-heading",cmd:"heading",hotkey:"Ctrl-H"},code:{title:"Code",className:"far fa-code",cmd:"code",hotkey:"Ctrl-X"},quote:{title:"Quote",className:"far fa-quote-left",cmd:"quote",hotkey:"Ctrl-Q"},link:{title:"Link",className:"far fa-link",cmd:"link",hotkey:"Ctrl-K"},image:{title:"Image",className:"far fa-image",cmd:"image",hotkey:"Ctrl-P"},fullscreen:{cmd:"fullscreen",className:"far fa-arrows-alt no-disable no-mobile",title:"Toggle Fullscreen",hotkey:"F11",ready:!0},preview:{cmd:"preview",className:"far fa-eye no-disable",title:"Toggle Preview",hotkey:"Ctrl-P",ready:!0},clipboard:{cmd:"clipboard",className:"far fa-clipboard",title:"Copy & Markdown Format",hotkey:"Ctrl-V"},clean:{cmd:"clean",className:"far fa-remove-format",title:"Html to markdown"},undo:{cmd:"undo",className:"far fa-undo",title:"Undo",hotkey:"Ctrl-Z"},redo:{cmd:"redo",className:"far fa-repeat",title:"Redo",hotkey:"Ctrl-Y"},bullist:{cmd:"bullist",className:"far fa-list-ul",title:"Generic List"},numlist:{cmd:"numlist",className:"far fa-list-ol",title:"Numbered List"}}}},name:{type:String,default:"html"},value:{type:String,default:"",required:!1},buttonClass:{type:String,default:"btn btn-outline-secondary"},options:{type:Object,default:function(){return{mode:"gfm",theme:"elegent",lineNumbers:!1,styleActiveLine:!1,styleSelectedText:!0,lineWrapping:!0,indentWithTabs:!0,autoRefresh:!0,tabSize:2,indentUnit:2}}}},data:()=>({id:"v-md-editor-"+(new Date).getTime(),editor:null,preview:!1,html:"",toolbars:[],shortcuts:{}}),watch:{value(e){e!=this.editor.getValue()&&this.editor.setValue(e)}},computed:{styles(){return{width:isNaN(this.width)?this.width:this.width+"%",height:isNaN(this.height)?this.height:this.height+"%"}}},methods:{isEmpty:function(e){return null==e||/^[\s\xa0]*$/.test(e)},isUrl:function(e){return!this.isEmpty(e)&&e.match(/((http(s)?):\/\/[\w\.\/\-=?#]+)/gi)},format(){for(var e=arguments[0],t=1;t<=arguments.length;t++)e=e.replace(/%[a-z]/,arguments[t]);return e},uid(e){return this.format("%s-%s",this.id,e)},obj(e){return jQuery("#"+this.uid(e))},_toggleBlock(e,t,r){r=this.isEmpty(r)?t:r;var i,o=this.editor,s=o.getCursor("start"),a=o.getCursor("end");this.state()[e]?(t=(i=o.getLine(s.line)).slice(0,s.ch),r=i.slice(s.ch),"bold"==e?(t=t.replace(/(\*\*|__)(?![\s\S]*(\*\*|__))/,""),r=r.replace(/(\*\*|__)/,"")):"italic"==e?(t=t.replace(/(\*|_)(?![\s\S]*(\*|_))/,""),r=r.replace(/(\*|_)/,"")):"strikethrough"==e&&(t=t.replace(/(\*\*|~~)(?![\s\S]*(\*\*|~~))/,""),r=r.replace(/(\*\*|~~)/,"")),o.replaceRange(t+r,{line:s.line,ch:0},{line:s.line,ch:99999999999999}),"bold"==e||"strikethrough"==e?(s.ch-=2,s!==a&&(a.ch-=2)):"italic"==e&&(s.ch-=1,s!==a&&(a.ch-=1))):(i=o.getSelection(),"bold"==e?i=(i=i.split("**").join("")).split("__").join(""):"italic"==e?i=(i=i.split("*").join("")).split("_").join(""):"strikethrough"==e&&(i=i.split("~~").join("")),o.replaceSelection(t+i+r),s.ch+=t.length,a.ch=s.ch+i.length),o.setSelection(s,a)},_toggleLine(e){for(var t=this.editor,r=this.state(),i=t.getCursor("start"),o=t.getCursor("end"),s={quote:/^(\s*)\>\s+/,bullist:/^(\s*)(\*|\-|\+)\s+/,numlist:/^(\s*)\d+\.\s+/},a={quote:"> ",bullist:"* ",numlist:"1. "},l=i.line;l<=o.line;l++)!function(i){var o=t.getLine(i);o=r[e]?o.replace(s[e],"$1"):a[e]+o,t.replaceRange(o,{line:i,ch:0},{line:i,ch:99999999999999})}(l)},state(e){e=e||this.editor.getCursor("start");var t=this.editor.getTokenAt(e);if(!t.type)return{};for(var r,i,o=t.type.split(" "),s={},a=0;a<o.length;a++)"strong"===(r=o[a])?s.bold=!0:"variable-2"===r?(i=this.editor.getLine(e.line),/^\s*\d+\.\s/.test(i)?s.numlist=!0:s.bullist=!0):"atom"===r?s.quote=!0:"em"===r?s.italic=!0:"quote"===r?s.quote=!0:"strikethrough"===r?s.strikethrough=!0:"comment"===r?s.code=!0:"link"===r||"url"===r?s.link=!0:"image"===r?s.image=!0:r.match(/^header(\-[1-6])?$/)&&(s[r.replace("header","heading")]=!0);return s},_replaceSelection(e,t,r){var i,o=this.editor,s=t[0],a=t[1],l=o.getCursor("start"),n=o.getCursor("end");r&&Object.keys(r).forEach(e=>{s=s.replace("#"+e+"#",r[e]),a=a.replace("#"+e+"#",r[e])}),e?(i=o.getLine(l.line),s=i.slice(0,l.ch),a=i.slice(l.ch),o.replaceRange(s+a,{line:l.line,ch:0})):(o.replaceSelection(s+a),l.ch+=s.length,l!==n&&(n.ch+=s.length)),o.setSelection(l,n),o.focus()},drawImage(e){var t=this.state();this._replaceSelection(t.image,["![#title#](",'#url# "#title#")'],e)},drawLink(e){var t=this.state();this._replaceSelection(t.link,["[#title#]",'(#url# "#title#")'],e)},command(e){var t=this.editor,r=t.getSelection();this.state();switch(this.$root.$emit("markdown-editor:"+e,this),e){case"undo":t.undo();break;case"redo":t.redo();break;case"bold":this._toggleBlock("bold","**");break;case"italic":this._toggleBlock("italic","*");break;case"strikethrough":this._toggleBlock("strikethrough","~~");break;case"code":this._toggleBlock("code","```");break;case"heading":t.replaceSelection("\n### "+r);break;case"clipboard":this.obj("modal-clipboard").modal("show");break;case"image":var i=prompt("Please enter image url","https://");if(this.isUrl(i)){var s=this.isEmpty(r)?"This is image title":r;this.drawImage({title:s,url:i})}break;case"link":i=prompt("Please enter link","https://");if(this.isUrl(i)){s=this.isEmpty(r)?i:r;this.drawLink({title:s,url:i})}break;case"quote":case"quote":this._toggleLine("quote");break;case"numlist":this._toggleLine("numlist");break;case"bullist":this._toggleLine("bullist");break;case"preview":var l=new a.a({typographer:!0,breaks:!0,quotes:"“”‘’"});this.html=l.render(t.getValue()),this.preview^=!0,this.obj("toolbar").find('.btn:not(".ready")').prop("disabled",this.preview);break;case"fullscreen":this.obj("container").toggleClass("v-md-fullscreen"),this.obj("fullscreen").toggleClass("active"),t.setOption("fullScreen",!t.getOption("fullScreen"));break;case"clean":r=o.a.parse(r),t.replaceSelection(r)}t.focus()},build(){if(jQuery){if(this.isEmpty(this.toolbar))console.error("You must set toolbar!");else if(!this.__rendered){var e=this;this.buttons=Object.assign(this.buttons,this.extend);for(var t=e.toolbar.toLowerCase().split(/(\s)/).filter((function(t){return!e.isEmpty(t)})),r=[],i=0;i<t.length;i++){var o=t[i],s=e.buttons[o];s&&(s.id=o,r.push(s)),"|"!==o&&i!=t.length-1||(this.toolbars.push(r),r=[])}var a=Object.assign({},{extraKeys:e.shortcuts,initialValue:e.value},e.options),l=document.getElementById(e.id+"-input");e.editor=n.a.fromTextArea(l,a),e.editor.on("change",(function(t){e.$emit("input",t.getValue())})),e.editor.on("cursorActivity",(function(){var t=e.state();e.obj("toolbar").find(".btn.active:not(.ready)").removeClass("active"),Object.keys(t).forEach(t=>{e.obj(t).addClass("active")})})),e.__rendered=!0}}else console.error("Must required jQuery!")}},mounted(){this.$nextTick(()=>{this.build()})},destroyed(){this.editor=null}},(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{class:["v-md-container",e.css],attrs:{id:e.uid("container")}},[r("div",{staticClass:"v-md-toolbar",attrs:{id:e.uid("toolbar")}},e._l(e.toolbars,(function(t){return r("div",{staticClass:"btn-group mr-3",attrs:{role:"group"}},e._l(t,(function(t){return r("button",{class:[e.buttonClass,{ready:t.ready}],attrs:{type:"button",id:e.uid(t.id),title:t.title},on:{click:function(r){return e.command(t.cmd)}}},[r("i",{class:t.className,attrs:{"aria-hidden":"true"}})])})),0)})),0),e._v(" "),r("div",{staticClass:"v-md-wrapper"},[r("textarea",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"}],style:e.styles,attrs:{id:e.uid("input"),name:e.name},domProps:{value:e.value},on:{input:function(t){t.target.composing||(e.value=t.target.value)}}}),e._v(" "),e.preview?r("div",{staticClass:"v-md-preview",attrs:{id:e.uid("html-preview")},domProps:{innerHTML:e._s(e.html)}}):e._e()])])}),[],!1,null,null,null).exports,d={install:function(e){e.__md_editor_installed||(e.__md_editor_installed=!0,e.component("markdown-editor",c))}};"undefined"!=typeof window&&window.Vue&&window.Vue.use(d);t.default=d}]);